document.addEventListener('DOMContentLoaded', () =>{const createLightSpots = () =>{const heroHeader = document.querySelector('.hero-header');if (!heroHeader) return;const lightSpotsContainer = document.createElement('div');lightSpotsContainer.className = 'light-spots-container';lightSpotsContainer.style.cssText = ` position: absolute;top: 0;left: 0;width: 100%;height: 100%;overflow: hidden;z-index: 2;pointer-events: none;`;const numSpots = Math.floor(Math.random() * 4) + 5;for (let i = 0;i < numSpots;i++){const spot = document.createElement('div');const size = Math.floor(Math.random() * 200) + 100;const left = Math.random() * 100;const top = Math.random() * 100;const hue = Math.random() > 0.6 ? '30' : '240';const saturation = Math.floor(Math.random() * 40) + 60;const opacity = (Math.random() * 0.08) + 0.02;const delay = Math.random() * 5;const duration = Math.random() * 10 + 15;spot.style.cssText = ` position: absolute;left: ${left}%;top: ${top}%;width: ${size}px;height: ${size}px;border-radius: 50%;background: radial-gradient(circle at center, hsla(${hue}, ${saturation}%, 60%, ${opacity * 2}) 0%, hsla(${hue}, ${saturation}%, 50%, 0) 70%);filter: blur(20px);animation: float-spot ${duration}s ease-in-out infinite;animation-delay: -${delay}s;will-change: transform;pointer-events: none;`;lightSpotsContainer.appendChild(spot);}if (!document.querySelector('#spot-animations')){const styleSheet = document.createElement('style');styleSheet.id = 'spot-animations';styleSheet.textContent = ` @keyframes float-spot{0%{transform: translate(0, 0) scale(1);opacity: ${Math.random() * 0.5 + 0.5};}25%{transform: translate(${Math.random() * 40 - 20}px, ${Math.random() * 40 - 20}px) scale(${Math.random() * 0.3 + 0.9});}50%{transform: translate(${Math.random() * 40 - 20}px, ${Math.random() * 40 - 20}px) scale(${Math.random() * 0.3 + 0.9});opacity: ${Math.random() * 0.5 + 0.5};}75%{transform: translate(${Math.random() * 40 - 20}px, ${Math.random() * 40 - 20}px) scale(${Math.random() * 0.3 + 0.9});}100%{transform: translate(0, 0) scale(1);opacity: ${Math.random() * 0.5 + 0.5};}}`;document.head.appendChild(styleSheet);}heroHeader.appendChild(lightSpotsContainer);};const createParticles = () =>{const heroHeader = document.querySelector('.hero-header');if (!heroHeader) return;const particlesContainer = document.createElement('div');particlesContainer.className = 'particles-container';particlesContainer.style.cssText = ` position: absolute;top: 0;left: 0;width: 100%;height: 100%;overflow: hidden;z-index: 2;pointer-events: none;`;const numParticles = Math.floor(Math.random() * 10) + 15;for (let i = 0;i < numParticles;i++){const particle = document.createElement('div');const size = Math.random() * 2 + 2;const left = Math.random() * 100;const top = Math.random() * 100;const isOrange = Math.random() > 0.7;const color = isOrange ? 'rgba(255, 133, 0, 0.5)' : 'rgba(255, 255, 255, 0.5)';const delay = Math.random() * 5;const duration = Math.random() * 20 + 30;particle.style.cssText = ` position: absolute;left: ${left}%;top: ${top}%;width: ${size}px;height: ${size}px;background-color: ${color};border-radius: 50%;filter: blur(1px);box-shadow: 0 0 ${size * 2}px ${color};animation: float-particle ${duration}s linear infinite;animation-delay: -${delay}s;will-change: transform;pointer-events: none;`;particlesContainer.appendChild(particle);}if (!document.querySelector('#particle-animations')){const styleSheet = document.createElement('style');styleSheet.id = 'particle-animations';styleSheet.textContent = ` @keyframes float-particle{0%{transform: translate(0, 0);opacity: 0;}10%{opacity: ${Math.random() * 0.4 + 0.1};}90%{opacity: ${Math.random() * 0.4 + 0.1};}100%{transform: translate(${Math.random() > 0.5 ? '-' : ''}${Math.random() * 200 + 100}px, ${Math.random() > 0.5 ? '-' : ''}${Math.random() * 200 + 100}px);opacity: 0;}}`;document.head.appendChild(styleSheet);}heroHeader.appendChild(particlesContainer);};createLightSpots();createParticles();const handleScrollAnimation = () =>{const elements = document.querySelectorAll('.feature-card, .product-card, .subcategory-card, .section-header');elements.forEach(element =>{if (!element.classList.contains('reveal')){element.classList.add('reveal');}const elementTop = element.getBoundingClientRect().top;const elementVisible = 150;if (elementTop < window.innerHeight - elementVisible){element.classList.add('active');}else{element.classList.remove('active');}});};handleScrollAnimation();window.addEventListener('scroll', handleScrollAnimation);function smoothScroll(target, duration = 800){const targetElement = document.querySelector(target);if (!targetElement) return;const targetPosition = targetElement.offsetTop - 80;const startPosition = window.pageYOffset;const distance = targetPosition - startPosition;let startTime = null;function animation(currentTime){if (startTime === null) startTime = currentTime;const timeElapsed = currentTime - startTime;const run = ease(timeElapsed, startPosition, distance, duration);window.scrollTo(0, run);if (timeElapsed < duration) requestAnimationFrame(animation);}function ease(t, b, c, d){t /= d / 2;if (t < 1) return c / 2 * t * t + b;t--;return -c / 2 * (t * (t - 2) - 1) + b;}requestAnimationFrame(animation);}const navLinks = document.querySelectorAll('.nav-link');navLinks.forEach(link =>{link.addEventListener('click', (e) =>{e.preventDefault();const targetId = link.getAttribute('href');const targetSection = document.querySelector(targetId);if (!targetSection) return;const sectionHeader = targetSection.querySelector('.section-header');if (!sectionHeader) return;const navHeight = document.querySelector('.main-nav').offsetHeight;const headerRect = sectionHeader.getBoundingClientRect();const scrollTop = window.pageYOffset || document.documentElement.scrollTop;const headerTop = headerRect.top + scrollTop;const scrollPosition = headerTop - navHeight;window.scrollTo({top: scrollPosition, behavior: 'smooth'});navLinks.forEach(l => l.classList.remove('active'));link.classList.add('active');setTimeout(() =>{if (window.updateStickyHeaders){window.updateStickyHeaders(targetId);}}, 300);});});const sections = document.querySelectorAll('section[id]');function navHighlighter(){let scrollY = window.pageYOffset;sections.forEach(current =>{const sectionHeight = current.offsetHeight;const sectionTop = current.offsetTop - 100;const sectionId = current.getAttribute('id');if (scrollY > sectionTop && scrollY <= sectionTop + sectionHeight){document.querySelector(`.nav-link[href="#${sectionId}"]`).classList.add('active');}else{document.querySelector(`.nav-link[href="#${sectionId}"]`).classList.remove('active');}});}window.addEventListener('scroll', navHighlighter);function setupStickyHeaders(){const headers = document.querySelectorAll('.section-header');if (!headers.length) return;const headerPositions = [];const triggerOffset = 10;const navHeight = document.querySelector('.main-nav')?.offsetHeight || 0;const stickyHeaderContainer = document.createElement('div');stickyHeaderContainer.className = 'sticky-header-container';stickyHeaderContainer.style.position = 'fixed';stickyHeaderContainer.style.top = '0';stickyHeaderContainer.style.left = '0';stickyHeaderContainer.style.width = '100%';stickyHeaderContainer.style.zIndex = '1000';stickyHeaderContainer.style.display = 'none';stickyHeaderContainer.style.transition = 'opacity 0.3s ease';stickyHeaderContainer.style.opacity = '0';document.body.appendChild(stickyHeaderContainer);const headerStates ={};headers.forEach((header, index) =>{header.id = header.id || `header-${index}`;const clonedHeader = header.cloneNode(true);clonedHeader.id = `sticky-${header.id}`;clonedHeader.classList.add('sticky');clonedHeader.style.display = 'none';clonedHeader.style.opacity = '0';clonedHeader.style.transition = 'opacity 0.3s ease';stickyHeaderContainer.appendChild(clonedHeader);headerStates[header.id] ={isSticky: false, clonedHeader: clonedHeader, element: header, sectionId: header.closest('section') ? header.closest('section').id : null};});let lastActiveHeaderId = null;function updateHeaderPositions(){headerPositions.length = 0;headers.forEach((header) =>{const rect = header.getBoundingClientRect();const scrollTop = window.pageYOffset || document.documentElement.scrollTop;const offsetTop = rect.top + scrollTop;headerPositions.push({id: header.id, offsetTop: offsetTop, height: rect.height, element: header});});headerPositions.sort((a, b) => a.offsetTop - b.offsetTop);}updateHeaderPositions();function updateStickyState(){const scrollTop = window.pageYOffset || document.documentElement.scrollTop;let activeHeaderId = null;for (let i = headerPositions.length - 1;i >= 0;i--){const pos = headerPositions[i];const nextPos = i < headerPositions.length - 1 ? headerPositions[i + 1] : null;const headerTop = pos.offsetTop - triggerOffset - navHeight;const headerBottom = nextPos ? nextPos.offsetTop - navHeight : Infinity;if (scrollTop >= headerTop && scrollTop < headerBottom){activeHeaderId = pos.id;break;}}if (!activeHeaderId && headerPositions.length > 0 && scrollTop < headerPositions[0].offsetTop - triggerOffset - navHeight){activeHeaderId = null;}if (!activeHeaderId && headerPositions.length > 0 && scrollTop >= headerPositions[headerPositions.length - 1].offsetTop - triggerOffset - navHeight){activeHeaderId = headerPositions[headerPositions.length - 1].id;}if (activeHeaderId !== lastActiveHeaderId){console.log(`Updating sticky state: ${lastActiveHeaderId}-> ${activeHeaderId}`);for (const id in headerStates){const headerState = headerStates[id];if (headerState && headerState.clonedHeader){headerState.clonedHeader.style.display = 'none';headerState.clonedHeader.style.opacity = '0';headerState.isSticky = false;}}if (activeHeaderId){const headerState = headerStates[activeHeaderId];if (headerState && headerState.clonedHeader){stickyHeaderContainer.style.backgroundColor = 'rgba(15, 23, 42, 0.95)';stickyHeaderContainer.style.backdropFilter = 'blur(10px)';stickyHeaderContainer.style.webkitBackdropFilter = 'blur(10px)';stickyHeaderContainer.style.boxShadow = '0 4px 15px rgba(0, 0, 0, 0.15)';stickyHeaderContainer.style.borderBottom = 'none';stickyHeaderContainer.style.display = 'block';headerState.clonedHeader.style.display = 'block';stickyHeaderContainer.style.opacity = '1';headerState.clonedHeader.style.opacity = '1';headerState.isSticky = true;}}else{stickyHeaderContainer.style.opacity = '0';stickyHeaderContainer.style.display = 'none';}lastActiveHeaderId = activeHeaderId;}}const observerOptions ={rootMargin: `-${navHeight}px 0px 0px 0px`, threshold: [0, 0.1, 0.5, 1]};const headerObserver = new IntersectionObserver((entries) =>{updateHeaderPositions();updateStickyState();}, observerOptions);headers.forEach(header =>{headerObserver.observe(header);});let scrollTimeout;let lastScrollTime = 0;const scrollThrottle = 100;function handleScroll(){const now = Date.now();clearTimeout(scrollTimeout);if (now - lastScrollTime > scrollThrottle){updateStickyState();lastScrollTime = now;}scrollTimeout = setTimeout(() =>{updateStickyState();}, 50);}window.addEventListener('scroll', handleScroll,{passive: true});let resizeTimeout;window.addEventListener('resize', () =>{clearTimeout(resizeTimeout);resizeTimeout = setTimeout(() =>{updateHeaderPositions();updateStickyState();}, 200);});window.updateStickyHeaders = function(sectionId){setTimeout(() =>{updateHeaderPositions();updateStickyState();setTimeout(() =>{updateHeaderPositions();updateStickyState();}, 100);}, 50);};updateStickyState();window.addEventListener('load', () =>{updateHeaderPositions();updateStickyState();});setInterval(() =>{updateHeaderPositions();updateStickyState();}, 2000);}if (document.readyState === 'complete' || document.readyState === 'interactive'){setTimeout(setupStickyHeaders, 100);}else{document.addEventListener('DOMContentLoaded', () =>{setTimeout(setupStickyHeaders, 100);});}const featureCards = document.querySelectorAll('.feature-card');featureCards.forEach(card =>{card.addEventListener('mouseenter', () =>{featureCards.forEach(c => c.classList.remove('hover'));card.classList.add('hover');});card.addEventListener('mouseleave', () =>{card.classList.remove('hover');});});const solutionLinks = document.querySelectorAll('.solution-link');solutionLinks.forEach(link =>{link.addEventListener('click', (e) =>{e.preventDefault();const card = link.closest('.subcategory-card');const title = card.querySelector('h4').textContent;const description = card.querySelector('p').textContent;const modal = document.createElement('div');modal.className = 'solution-modal';modal.innerHTML = ` <div class="modal-content"> <span class="close-modal">&times;</span> <h3>${title}</h3> <div class="modal-description">${description}</div> <div class="modal-details"> <h4>Core Advantages</h4> <ul> <li>High Performance: Latest LED chip generation for excellent display effect</li> <li>Energy Saving and Environmental Protection: Low power consumption design, meeting green energy standards</li> <li>Stable and Reliable: Strict quality control, ensuring product long-term stable operation</li> <li>Smart Control: Supports smart dimming and scene linkage</li> </ul> <h4>Technical Parameters</h4> <ul> <li>Brightness: 800-1200 nits</li> <li>Contrast Ratio: 3000:1</li> <li>Viewing Angle: 160°(H) / 160°(V)</li> <li>Refresh Rate: 3840Hz</li> </ul> <div class="modal-contact"> <p>Learn more details, please contact our technical consultant</p> <a href="mailto:contact@example.com" class="btn btn-primary">Contact Us</a> </div> </div> </div> `;document.body.appendChild(modal);document.body.style.overflow = 'hidden';const closeBtn = modal.querySelector('.close-modal');closeBtn.addEventListener('click', () =>{modal.style.opacity = '0';setTimeout(() =>{modal.remove();document.body.style.overflow = '';}, 300);});modal.addEventListener('click', (e) =>{if (e.target === modal){modal.style.opacity = '0';setTimeout(() =>{modal.remove();document.body.style.overflow = '';}, 300);}});});});const addHeroCTA = () =>{const heroContent = document.querySelector('.hero-content');if (!heroContent) return;const ctaDiv = document.createElement('div');ctaDiv.className = 'hero-cta';ctaDiv.innerHTML = ` <a href="#products" class="btn btn-primary">Explore Products</a> <a href="#about" class="btn btn-secondary">Learn About Us</a> `;if (!heroContent.querySelector('.hero-cta')){heroContent.appendChild(ctaDiv);}};addHeroCTA();const wrapSectionsWithContainer = () =>{const sections = document.querySelectorAll('section');sections.forEach(section =>{if (section.querySelector('.container')) return;const content = section.innerHTML;section.innerHTML = '';const container = document.createElement('div');container.className = 'container';container.innerHTML = content;section.appendChild(container);});};wrapSectionsWithContainer();const setupReadingEffect = () =>{const introContent = document.querySelector('.intro-content');if (!introContent) return;const textElements = introContent.querySelectorAll('.intro-paragraph, .tech-list li, .number-label');const protectedWords = ['YETINSA', 'LED', 'RGB', 'MLED'];function preprocessText(text){let processedText = text;protectedWords.forEach((word, index) =>{const placeholder = `__PROTECTED_${index}__`;const regex = new RegExp(word, 'g');processedText = processedText.replace(regex, placeholder);});return processedText;}function postprocessText(text){let processedText = text;protectedWords.forEach((word, index) =>{const placeholder = `__PROTECTED_${index}__`;const regex = new RegExp(placeholder, 'g');processedText = processedText.replace(regex, word);});return processedText;}textElements.forEach(element =>{if (element.querySelector('.highlight, .tech-item')){Array.from(element.childNodes).forEach(node =>{if (node.nodeType === Node.TEXT_NODE){let text = node.textContent;text = preprocessText(text);text = text.replace(/([a-z])([A-Z])/g, '$1 $2');text = text.replace(/\s+/g, ' ');text = postprocessText(text);node.textContent = text;}});}else{let text = element.innerText;text = preprocessText(text);text = text.replace(/([a-z])([A-Z])/g, '$1 $2');text = text.replace(/\s+/g, ' ');text = postprocessText(text);element.innerText = text;}});const highlightElements = introContent.querySelectorAll('.highlight, .tech-item');highlightElements.forEach(element =>{let text = element.innerText;text = preprocessText(text);text = text.replace(/([a-z])([A-Z])/g, '$1 $2');text = text.replace(/\s+/g, ' ');text = postprocessText(text);element.innerText = text;});};setTimeout(setupReadingEffect, 1000);function animateProductCards(){const productCards = document.querySelectorAll('.product-card');const observer = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.classList.add('animate-in');observer.unobserve(entry.target);}});},{threshold: 0.2, rootMargin: '0px 0px -100px 0px'});productCards.forEach(card =>{card.classList.add('fade-in');observer.observe(card);});}document.addEventListener('DOMContentLoaded', function(){initNavMenu();animateProductCards();});function initNavMenu(){const menuToggle = document.querySelector('.menu-toggle');const navMenu = document.querySelector('.nav-menu');if (menuToggle && navMenu){menuToggle.addEventListener('click', function(){navMenu.classList.toggle('active');menuToggle.classList.toggle('active');});}}const productObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.classList.add('visible');}});},{threshold: 0.1});const productCards = document.querySelectorAll('.product-card');productCards.forEach(card =>{productObserver.observe(card);});const companyObserver = new IntersectionObserver((entries) =>{entries.forEach(entry =>{if (entry.isIntersecting){entry.target.classList.add('fade-in');}});},{threshold: 0.1});const companyElements = document.querySelectorAll('.data-item, .position-item, .culture-item');companyElements.forEach(element =>{companyObserver.observe(element);});});function easeInOutCubic(t){return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;}